<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Vocabulary Games ‚Äî Government & Society</title>
<style>
  :root{
    --primary:#2563eb;
    --accent:#16a34a;
    --danger:#dc2626;
    --bg1: #f0f9ff;
    --bg2: #fff7ed;
    --card:#ffffff;
  }
  body{
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    margin:0; padding:0;
    background: linear-gradient(135deg,var(--bg1),var(--bg2));
    color:#0f172a;
    -webkit-font-smoothing:antialiased;
  }
  header{
    background:var(--primary); color:white; padding:14px 16px; box-shadow:0 4px 18px rgba(2,6,23,0.15);
  }
  header h1{ margin:0; font-size:20px; }
  .container{ max-width:1000px; margin:18px auto; padding:0 16px; }
  .topbar{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin:14px 0; }
  .tabs{display:flex; gap:8px; flex-wrap:wrap;}
  .tab-btn{
    background:var(--primary); color:white; border:none; padding:8px 12px; border-radius:10px; cursor:pointer;
    box-shadow:0 2px 8px rgba(37,99,235,0.15);
  }
  .tab-btn.secondary{ background:#6b7280; }
  .controls{ margin-left:auto; display:flex; gap:8px; align-items:center; }
  select, input[type=number]{ padding:8px 10px; border-radius:8px; border:1px solid #cbd5e1; }
  button.small{ padding:8px 10px; border-radius:8px; border:none; cursor:pointer; background:#64748b; color:white; }
  main{ margin-top:10px; }
  .game{ display:none; padding:18px; background:var(--card); border-radius:12px; box-shadow:0 6px 20px rgba(2,6,23,0.06); }
  .visible{ display:block; }

  /* FLASHCARD */
  .flash-wrap{ display:flex; flex-direction:column; align-items:center; gap:12px; }
  .flashcard-container{ perspective:1200px; width:360px; height:220px; }
  .card{ width:100%; height:100%; position:relative; transform-style:preserve-3d; transition:transform 0.6s; cursor:pointer; }
  .card.flip{ transform:rotateY(180deg); }
  .face{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; backface-visibility:hidden; border-radius:12px; font-size:28px; font-weight:600; box-shadow:0 10px 30px rgba(2,6,23,0.08); padding:18px; text-align:center; }
  .front{ background: linear-gradient(135deg,#ffffff,#eff6ff); }
  .back{ background: linear-gradient(135deg,#dbeafe,#e0f2fe); transform:rotateY(180deg); }

  .flash-controls{ display:flex; gap:8px; align-items:center; }

  /* QUIZ */
  .quiz-q{ font-size:20px; margin-bottom:10px; }
  .quiz-options{ display:flex; flex-direction:column; gap:10px; align-items:center; }
  .quiz-options button{ width:60%; padding:10px 12px; border-radius:10px; border:none; background:var(--primary); color:white; cursor:pointer; font-size:16px; }

  /* TYPING */
  .typing-row{ display:flex; flex-direction:column; align-items:center; gap:8px; }
  #typing-input{ padding:10px 12px; width:60%; font-size:16px; border-radius:10px; border:1px solid #cbd5e1; }

  /* HANGMAN (Guess the Word) */
  .hangman-area{ display:flex; flex-direction:column; align-items:center; gap:12px; }
  .letters{ display:flex; gap:6px; flex-wrap:wrap; justify-content:center; max-width:720px; }
  .letter-btn{ padding:8px 10px; border-radius:8px; border:none; background:#e6e9ef; cursor:pointer; min-width:40px; font-weight:600; }
  .letter-btn.disabled{ opacity:0.45; cursor:default; }
  .word-display{ font-size:26px; letter-spacing:6px; font-weight:700; }

  /* SCRAMBLE */
  .scramble-row{ display:flex; flex-direction:column; align-items:center; gap:10px; }
  .scramble-box{ display:flex; gap:8px; flex-wrap:wrap; justify-content:center; }

  /* SPEED */
  .speed-top{ display:flex; gap:12px; align-items:center; justify-content:center; margin-bottom:12px; flex-wrap:wrap;}
  .timer{ font-size:20px; font-weight:700; padding:6px 12px; border-radius:8px; background:#fff; box-shadow:0 6px 18px rgba(2,6,23,0.06); }

  /* common */
  .status{ margin-top:10px; font-weight:700; }
  .score{ font-weight:800; color:var(--accent); }
  .correct{ background:linear-gradient(135deg,#ecfccb,#bbf7d0); }
  .wrong{ background:linear-gradient(135deg,#fee2e2,#fecaca); }

  footer{ margin:22px 0; text-align:center; color:#475569; font-size:13px; }
  /* small screens */
  @media (max-width:700px){
    .card{ font-size:20px; }
    .flashcard-container{ width:300px; height:180px; }
    .quiz-options button{ width:86%; }
    #typing-input{ width:86%; }
  }
  /* simple fireworks */
  .firework{ position:fixed; left:50%; top:20%; transform:translateX(-50%); pointer-events:none; z-index:1000; }
  .burst{ width:8px; height:8px; background:transparent; box-shadow:
    0 -40px 0 0 #ff7ab6,
    28px -28px 0 0 #ffb86e,
    40px 0 0 0 #ffd166,
    28px 28px 0 0 #7ee7c7,
    0 40px 0 0 #8bd3ff,
    -28px 28px 0 0 #d3b7ff,
    -40px 0 0 0 #ff9a9e,
    -28px -28px 0 0 #f6f59d;
    animation: burst 700ms ease-out forwards;}
  @keyframes burst{ from{ opacity:0; transform:scale(0.2) } 50%{ opacity:1 } to{ opacity:0; transform:scale(1.5) } }
</style>
</head>
<body>
<header>
  <div style="display:flex;align-items:center;gap:12px;max-width:1000px;margin:0 auto;">
    <h1>Vocabulary Games ‚Äî Government & Society</h1>
  </div>
</header>

<div class="container">
  <div class="topbar">
    <div class="tabs">
      <button class="tab-btn" onclick="openGame('flash')">üß† –§–ª–µ—à-–∫–∞—Ä—Ç–∫–∏</button>
      <button class="tab-btn" onclick="openGame('quiz')">üéØ Quiz</button>
      <button class="tab-btn" onclick="openGame('typing')">‚úçÔ∏è Typing</button>
      <button class="tab-btn" onclick="openGame('hang')">üé∞ Guess the Word</button>
      <button class="tab-btn" onclick="openGame('scramble')">üî° Scramble</button>
      <button class="tab-btn" onclick="openGame('speed')">‚è±Ô∏è Speed Test</button>
    </div>

    <div class="controls">
      <label for="wordCount">–°–ª—ñ–≤:</label>
      <select id="wordCount" onchange="applySettings()">
        <option value="5">5</option>
        <option value="10">10</option>
        <option value="20" selected>20</option>
      </select>
      <button class="small" onclick="shuffleAll()">üîÄ –ü–µ—Ä–µ–º—ñ—à–∞—Ç–∏ –≤—Å—ñ</button>
    </div>
  </div>

  <main>
    <!-- FLASHCARDS -->
    <section id="flash" class="game visible">
      <div style="display:flex;gap:18px;flex-direction:column;align-items:center;">
        <div class="flash-wrap">
          <div class="flashcard-container">
            <div class="card" id="flashcard" title="–ö–ª—ñ–∫ ‚Äî –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–∏">
              <div class="face front" id="flash-front"></div>
              <div class="face back" id="flash-back"></div>
            </div>
          </div>
          <div class="flash-controls">
            <button class="tab-btn secondary" onclick="prevFlash()">‚¨ÖÔ∏è –ü–æ–ø–µ—Ä–µ–¥–Ω—è</button>
            <button class="tab-btn" onclick="shuffleFlashOnly()">üîÄ –ü–µ—Ä–µ–º—ñ—à–∞—Ç–∏ —Ñ–ª–µ—à-–∫–∞—Ä—Ç–∫–∏</button>
            <button class="tab-btn secondary" onclick="nextFlash()">–ù–∞—Å—Ç—É–ø–Ω–∞ ‚û°Ô∏è</button>
          </div>
          <div class="status" id="flash-status"></div>
        </div>
      </div>
    </section>

    <!-- QUIZ -->
    <section id="quiz" class="game">
      <div>
        <div class="quiz-q" id="quiz-q">–ü–∏—Ç–∞–Ω–Ω—è...</div>
        <div class="quiz-options" id="quiz-options"></div>
        <div class="status">–†–∞—Ö—É–Ω–æ–∫: <span id="quiz-score" class="score">0</span></div>
      </div>
    </section>

    <!-- TYPING -->
    <section id="typing" class="game">
      <div class="typing-row">
        <div id="typing-prompt" style="font-size:18px;font-weight:700;">–ü–µ—Ä–µ–∫–ª–∞–¥—ñ—Ç—å:</div>
        <div id="typing-word" style="font-size:20px;font-weight:800;"></div>
        <input id="typing-input" placeholder="–í–≤–µ–¥—ñ—Ç—å –∞–Ω–≥–ª—ñ–π—Å—å–∫–µ —Å–ª–æ–≤–æ —ñ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å Enter">
        <div id="typing-answer" class="status"></div>
        <div class="status">–†–∞—Ö—É–Ω–æ–∫: <span id="typing-score" class="score">0</span></div>
      </div>
    </section>

    <!-- HANGMAN / GUESS THE WORD -->
    <section id="hang" class="game">
      <div class="hangman-area">
        <div id="hang-info" style="font-weight:700;">–í–≥–∞–¥–∞–π –∞–Ω–≥–ª—ñ–π—Å—å–∫–µ —Å–ª–æ–≤–æ –∑–∞ –ø–µ—Ä–µ–∫–ª–∞–¥–æ–º</div>
        <div id="hang-uk" style="font-size:20px;font-weight:800;"></div>
        <div class="word-display" id="hang-display">_ _ _ _</div>
        <div id="hang-chances" style="font-size:14px;color:#6b7280;"></div>
        <div class="letters" id="hang-letters"></div>
        <div class="status" id="hang-status"></div>
        <div style="margin-top:8px;">
          <button class="tab-btn" onclick="startHang()">–ù–æ–≤–∞</button>
        </div>
      </div>
    </section>

    <!-- SCRAMBLE -->
    <section id="scramble" class="game">
      <div class="scramble-row">
        <div id="scramble-uk" style="font-weight:800;font-size:18px;"></div>
        <div class="scramble-box" id="scramble-box"></div>
        <input id="scramble-input" placeholder="–í–≤–µ–¥—ñ—Ç—å –∑—ñ–±—Ä–∞–Ω–µ —Å–ª–æ–≤–æ" />
        <div>
          <button class="tab-btn" onclick="checkScramble()">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
          <button class="tab-btn secondary" onclick="newScramble()">–ù–æ–≤–µ —Å–ª–æ–≤–æ</button>
        </div>
        <div class="status" id="scramble-status"></div>
      </div>
    </section>

    <!-- SPEED TEST -->
    <section id="speed" class="game">
      <div>
        <div class="speed-top">
          <div class="timer" id="speed-timer">30s</div>
          <div class="status">–ü—Ä–∞–≤–∏–ª—å–Ω–æ: <span id="speed-score" class="score">0</span></div>
          <div><button class="tab-btn" onclick="startSpeed()">Start 30s</button></div>
        </div>
        <div id="speed-uk" style="font-weight:800;font-size:18px;"></div>
        <input id="speed-input" placeholder="–®–≤–∏–¥–∫–æ –≤–≤–µ–¥—ñ—Ç—å –ø–µ—Ä–µ–∫–ª–∞–¥" />
        <div class="status" id="speed-status"></div>
      </div>
    </section>

  </main>


</div>

<!-- fireworks -->
<div id="firework-area" class="firework" style="display:none;"><div class="burst"></div></div>

<script>
/* -------------------------
   Words list (20)
   ------------------------- */
const fullWords = [
  {en:'government', uk:'—É—Ä—è–¥'},
  {en:'country', uk:'–∫—Ä–∞—ó–Ω–∞'},
  {en:'nation', uk:'–Ω–∞—Ü—ñ—è'},
  {en:'capital', uk:'—Å—Ç–æ–ª–∏—Ü—è'},
  {en:'citizen', uk:'–≥—Ä–æ–º–∞–¥—è–Ω–∏–Ω'},
  {en:'population', uk:'–Ω–∞—Å–µ–ª–µ–Ω–Ω—è'},
  {en:'village', uk:'—Å–µ–ª–æ'},
  {en:'town', uk:'–º—ñ—Å—Ç–æ (–º–∞–ª–µ–Ω—å–∫–µ)'},
  {en:'city', uk:'–º—ñ—Å—Ç–æ (–≤–µ–ª–∏–∫–µ)'},
  {en:'building', uk:'–±—É–¥—ñ–≤–ª—è'},
  {en:'bridge', uk:'–º—ñ—Å—Ç'},
  {en:'market', uk:'—Ä–∏–Ω–æ–∫'},
  {en:'square', uk:'–ø–ª–æ—â–∞'},
  {en:'museum', uk:'–º—É–∑–µ–π'},
  {en:'library', uk:'–±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞'},
  {en:'law', uk:'–∑–∞–∫–æ–Ω'},
  {en:'police', uk:'–ø–æ–ª—ñ—Ü—ñ—è'},
  {en:'prison', uk:'–≤‚Äô—è–∑–Ω–∏—Ü—è'},
  {en:'politics', uk:'–ø–æ–ª—ñ—Ç–∏–∫–∞'},
  {en:'president', uk:'–ø—Ä–µ–∑–∏–¥–µ–Ω—Ç'},
];

/* -------------------------
   Utilities
   ------------------------- */
function shuffleArray(a){
  const arr = a.slice();
  for(let i=arr.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]] = [arr[j],arr[i]];
  }
  return arr;
}
function randItem(a){ return a[Math.floor(Math.random()*a.length)]; }

/* -------------------------
   Active subset (based on selector)
   ------------------------- */
let activeWords = fullWords.slice(); // current subset
function buildActive(){
  const n = parseInt(document.getElementById('wordCount').value,10) || 20;
  activeWords = shuffleArray(fullWords).slice(0,n);
}

/* -------------------------
   Open game tab
   ------------------------- */
function openGame(id){
  document.querySelectorAll('.game').forEach(s=>s.classList.remove('visible'));
  document.getElementById(id).classList.add('visible');
}

/* -------------------------
   Global controls
   ------------------------- */
function applySettings(){
  buildActive();
  initAllGames();
}
function shuffleAll(){
  buildActive();
  // shuffle internal orders
  startFlash_init();
  startQuiz();
  startTyping();
  startHang_init();
  newScramble();
  // no automatic start for speed
  showFirework(false);
}

/* -------------------------
   FIREWORK (short)
   ------------------------- */
function showFirework(show=true){
  const area = document.getElementById('firework-area');
  if(show){
    area.style.display='block';
    setTimeout(()=> area.style.display='none',900);
  } else area.style.display='none';
}

/* =========================
   FLASHCARDS
   ========================= */
let flashOrder = [];
let flashIndex = 0;
const flashCard = document.getElementById('flashcard');
const flashFront = document.getElementById('flash-front');
const flashBack = document.getElementById('flash-back');
const flashStatus = document.getElementById('flash-status');

flashCard.addEventListener('click', ()=> flashCard.classList.toggle('flip'));

function startFlash_init(){
  flashOrder = shuffleArray(activeWords.slice());
  flashIndex = 0;
  renderFlash();
}
function renderFlash(){
  if(!flashOrder.length){
    flashFront.textContent='‚Äî';
    flashBack.textContent='';
    flashStatus.textContent='';
    return;
  }
  const w = flashOrder[flashIndex];
  flashFront.textContent = w.en;
  flashBack.textContent = w.uk;
  flashStatus.textContent = `–ö–∞—Ä—Ç–∫–∞ ${flashIndex+1} –∑ ${flashOrder.length}`;
  flashCard.classList.remove('flip');
}
function nextFlash(){
  if(!flashOrder.length) return;
  flashIndex = (flashIndex+1)%flashOrder.length;
  renderFlash();
}
function prevFlash(){
  if(!flashOrder.length) return;
  flashIndex = (flashIndex-1+flashOrder.length)%flashOrder.length;
  renderFlash();
}
function shuffleFlashOnly(){
  flashOrder = shuffleArray(flashOrder);
  flashIndex = 0;
  renderFlash();
}

/* =========================
   QUIZ
   ========================= */
let quizOrder = [];
let quizIndex = 0;
let quizScore = 0;

function startQuiz(){
  quizOrder = shuffleArray(activeWords.slice());
  quizIndex = 0; quizScore = 0;
  renderQuiz();
}
function renderQuiz(){
  const qEl = document.getElementById('quiz-q');
  const optsEl = document.getElementById('quiz-options');
  const scoreEl = document.getElementById('quiz-score');
  if(quizIndex >= quizOrder.length){
    qEl.textContent = `üéâ –ó–∞–∫—ñ–Ω—á–µ–Ω–æ! –†–µ–∑—É–ª—å—Ç–∞—Ç: ${quizScore}/${quizOrder.length}`;
    optsEl.innerHTML = '';
    scoreEl.textContent = `${quizScore}`;
    showFirework(true);
    return;
  }
  const w = quizOrder[quizIndex];
  qEl.textContent = `–ü–µ—Ä–µ–∫–ª–∞–¥—ñ—Ç—å: ${w.uk}`;
  // build options
  const opts = [w.en];
  while(opts.length < 4){
    const c = randItem(fullWords).en;
    if(!opts.includes(c)) opts.push(c);
  }
  const shuffledOpts = shuffleArray(opts);
  optsEl.innerHTML = '';
  shuffledOpts.forEach(o=>{
    const btn = document.createElement('button');
    btn.textContent = o;
    btn.onclick = () => {
      if(o === w.en){
        quizScore++;
        btn.classList.add('correct');
      } else {
        btn.classList.add('wrong');
      }
      // short delay to show color
      setTimeout(()=>{ quizIndex++; renderQuiz(); }, 500);
    };
    optsEl.appendChild(btn);
  });
  scoreEl.textContent = `${quizScore}`;
}

/* =========================
   TYPING
   ========================= */
let typingCurrent = null;
let typingScore = 0;
const typingWordEl = document.getElementById('typing-word');
const typingInput = document.getElementById('typing-input');
const typingAnswer = document.getElementById('typing-answer');

function startTyping(){
  typingScore = 0;
  document.getElementById('typing-score').textContent = typingScore;
  nextTyping();
}
function nextTyping(){
  typingCurrent = randItem(activeWords);
  typingWordEl.textContent = `${typingCurrent.uk}`;
  typingAnswer.textContent = '';
  typingInput.value = '';
  typingInput.focus();
}
typingInput.addEventListener('keyup', (e)=>{
  if(e.key !== 'Enter') return;
  if(!typingCurrent) return;
  const user = typingInput.value.trim().toLowerCase();
  const correct = typingCurrent.en.trim().toLowerCase();
  if(user && user === correct){
    typingScore++;
    typingAnswer.textContent = '‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: ' + typingCurrent.en;
    typingAnswer.style.color = 'var(--accent)';
  } else {
    typingAnswer.textContent = '‚ùå –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å: ' + typingCurrent.en;
    typingAnswer.style.color = 'var(--danger)';
  }
  document.getElementById('typing-score').textContent = typingScore;
  setTimeout(nextTyping, 900);
});

/* =========================
   HANGMAN / GUESS THE WORD
   ========================= */
let hangWord = null;
let hangDisplay = [];
let hangAttempts = 6;
const hangUk = document.getElementById('hang-uk');
const hangDisplayEl = document.getElementById('hang-display');
const hangChances = document.getElementById('hang-chances');
const hangLetters = document.getElementById('hang-letters');
const hangStatus = document.getElementById('hang-status');

function startHang_init(){
  // build letter buttons once
  hangLetters.innerHTML = '';
  const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
  letters.forEach(l=>{
    const b = document.createElement('button');
    b.textContent = l;
    b.className = 'letter-btn';
    b.onclick = ()=> tryLetter(b, l);
    hangLetters.appendChild(b);
  });
}

function startHang(){
  hangWord = randItem(activeWords);
  const w = hangWord.en.toUpperCase();
  hangDisplay = w.split('').map(ch => (/[A-Z]/.test(ch) ? '_' : ch));
  hangAttempts = Math.max(4, Math.ceil(w.length / 2)); // dynamic attempts
  renderHang();
  // enable all letter buttons
  document.querySelectorAll('#hang-letters .letter-btn').forEach(b=>{
    b.disabled = false; b.classList.remove('disabled'); b.style.background='';
  });
  showHangStatus('');
}

function renderHang(){
  hangUk.textContent = hangWord ? hangWord.uk : '';
  hangDisplayEl.textContent = hangDisplay.join(' ');
  hangChances.textContent = `–°–ø—Ä–æ–±–∏: ${hangAttempts}`;
}

function tryLetter(btn, letter){
  if(!hangWord || btn.disabled) return;
  btn.disabled = true; btn.classList.add('disabled');
  const w = hangWord.en.toUpperCase();
  let found = false;
  for(let i=0;i<w.length;i++){
    if(w[i] === letter){
      hangDisplay[i] = letter;
      found = true;
    }
  }
  if(!found){
    hangAttempts--;
    btn.style.background = '#fee2e2';
  } else {
    btn.style.background = '#bbf7d0';
  }
  renderHang();
  checkHangEnd();
}

function checkHangEnd(){
  const joined = hangDisplay.join('');
  if(!joined.includes('_')){
    showHangStatus('üéâ –í–∏ –≤—ñ–¥–≥–∞–¥–∞–ª–∏!'); showFirework(true);
  } else if(hangAttempts <= 0){
    showHangStatus('üí• –í–∏ –ø—Ä–æ–≥—Ä–∞–ª–∏. –°–ª–æ–≤–æ: ' + hangWord.en);
  }
}

function showHangStatus(msg){
  hangStatus.textContent = msg || '';
}

/* =========================
   SCRAMBLE
   ========================= */
let scrambleCurrent = null;
const scrambleUk = document.getElementById('scramble-uk');
const scrambleBox = document.getElementById('scramble-box');
const scrambleInput = document.getElementById('scramble-input');
const scrambleStatus = document.getElementById('scramble-status');

function newScramble(){
  scrambleInput.value = '';
  scrambleStatus.textContent = '';
  scrambleCurrent = randItem(activeWords);
  scrambleUk.textContent = scrambleCurrent.uk;
  const letters = scrambleCurrent.en.split('');
  const scrambled = shuffleArray(letters);
  scrambleBox.innerHTML = '';
  scrambled.forEach(ch=>{
    const span = document.createElement('button');
    span.textContent = ch;
    span.className = 'letter-btn';
    span.onclick = ()=> { scrambleInput.value += ch; };
    scrambleBox.appendChild(span);
  });
  scrambleInput.focus();
}
function checkScramble(){
  const val = scrambleInput.value.trim().toLowerCase();
  if(!scrambleCurrent) return;
  if(val === scrambleCurrent.en.toLowerCase()){
    scrambleStatus.textContent = '‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!';
    scrambleStatus.style.color = 'var(--accent)';
    showFirework(true);
  } else {
    scrambleStatus.textContent = '‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω–∞: ' + scrambleCurrent.en;
    scrambleStatus.style.color = 'var(--danger)';
  }
  setTimeout(newScramble, 1000);
}

/* =========================
   SPEED TEST (30s)
   ========================= */
let speedInterval = null;
let speedTimeLeft = 30;
let speedScore = 0;
let speedCurrent = null;
const speedTimer = document.getElementById('speed-timer');
const speedUk = document.getElementById('speed-uk');
const speedInput = document.getElementById('speed-input');
const speedStatus = document.getElementById('speed-status');
const speedScoreEl = document.getElementById('speed-score');

function startSpeed(){
  speedTimeLeft = 30;
  speedScore = 0;
  speedScoreEl.textContent = speedScore;
  speedStatus.textContent = '';
  speedInput.value = '';
  speedInput.disabled = false;
  nextSpeedWord();
  speedTimer.textContent = `${speedTimeLeft}s`;
  if(speedInterval) clearInterval(speedInterval);
  speedInterval = setInterval(()=>{
    speedTimeLeft--;
    speedTimer.textContent = `${speedTimeLeft}s`;
    if(speedTimeLeft <= 0){
      clearInterval(speedInterval);
      endSpeed();
    }
  },1000);
  speedInput.focus();
}

function nextSpeedWord(){
  speedCurrent = randItem(activeWords);
  speedUk.textContent = speedCurrent.uk;
  speedInput.value = '';
}

speedInput.addEventListener('keyup', (e)=>{
  if(e.key !== 'Enter') return;
  if(!speedCurrent || speedTimeLeft <= 0) return;
  const val = speedInput.value.trim().toLowerCase();
  if(val === speedCurrent.en.toLowerCase()){
    speedScore++;
    speedStatus.textContent = '‚úÖ';
    speedStatus.style.color = 'var(--accent)';
  } else {
    speedStatus.textContent = '‚ùå ' + speedCurrent.en;
    speedStatus.style.color = 'var(--danger)';
  }
  speedScoreEl.textContent = speedScore;
  nextSpeedWord();
});

function endSpeed(){
  speedInput.disabled = true;
  speedUk.textContent = '';
  speedStatus.textContent = `–ß–∞—Å –≤–∏–π—à–æ–≤! –í–∏ –Ω–∞–±—Ä–∞–ª–∏ ${speedScore} –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö.`;
  if(speedScore > Math.max(1, Math.floor(activeWords.length/3))) showFirework(true);
}

/* =========================
   INIT ALL
   ========================== */
function initAllGames(){
  buildActive();
  startFlash_init();
  startQuiz();
  startTyping();
  startHang_init();
  startHang(); // start first hang
  newScramble();
  // speed remains idle until user presses start
}

function initPage(){
  // default build
  buildActive();
  initAllGames();
  openGame('flash');
}

initPage();

/* keyboard helpers */
document.addEventListener('keydown', (e)=>{
  if(e.key === '1') openGame('flash');
  if(e.key === '2') openGame('quiz');
  if(e.key === '3') openGame('typing');
  if(e.key === '4') openGame('hang');
  if(e.key === '5') openGame('scramble');
  if(e.key === '6') openGame('speed');
});
</script>
</body>
</html>
